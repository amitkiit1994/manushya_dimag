<svg width="900" height="600" viewBox="0 0 900 600" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="600" fill="white"/>
  <g font-family="monospace" font-size="16" fill="black">
    <rect x="40" y="40" width="160" height="40" rx="8" fill="#e3e3e3"/>
    <text x="120" y="68" text-anchor="middle">User / SDK / Agent</text>
    <rect x="260" y="40" width="180" height="40" rx="8" fill="#cce5ff"/>
    <text x="350" y="68" text-anchor="middle">FastAPI App (main.py)</text>
    <rect x="500" y="40" width="120" height="40" rx="8" fill="#f8d7da"/>
    <text x="560" y="68" text-anchor="middle">JWT Auth</text>
    <rect x="660" y="40" width="160" height="40" rx="8" fill="#fff3cd"/>
    <text x="740" y="68" text-anchor="middle">Policy Engine</text>
    <rect x="260" y="120" width="180" height="40" rx="8" fill="#d4edda"/>
    <text x="350" y="148" text-anchor="middle">/v1/identity</text>
    <rect x="260" y="180" width="180" height="40" rx="8" fill="#d4edda"/>
    <text x="350" y="208" text-anchor="middle">/v1/memory</text>
    <rect x="260" y="240" width="180" height="40" rx="8" fill="#d4edda"/>
    <text x="350" y="268" text-anchor="middle">/v1/policy</text>
    <rect x="260" y="300" width="180" height="40" rx="8" fill="#d4edda"/>
    <text x="350" y="328" text-anchor="middle">/metrics /healthz</text>
    <rect x="40" y="400" width="180" height="40" rx="8" fill="#f0f0f0"/>
    <text x="130" y="428" text-anchor="middle">PostgreSQL (pgvector)</text>
    <rect x="260" y="400" width="120" height="40" rx="8" fill="#f0f0f0"/>
    <text x="320" y="428" text-anchor="middle">Identities</text>
    <rect x="400" y="400" width="120" height="40" rx="8" fill="#f0f0f0"/>
    <text x="460" y="428" text-anchor="middle">Memories</text>
    <rect x="540" y="400" width="120" height="40" rx="8" fill="#f0f0f0"/>
    <text x="600" y="428" text-anchor="middle">Policies</text>
    <rect x="680" y="400" width="120" height="40" rx="8" fill="#f0f0f0"/>
    <text x="740" y="428" text-anchor="middle">Audit Logs</text>
    <rect x="40" y="500" width="120" height="40" rx="8" fill="#e2e3e5"/>
    <text x="100" y="528" text-anchor="middle">Celery Worker</text>
    <rect x="180" y="500" width="120" height="40" rx="8" fill="#e2e3e5"/>
    <text x="240" y="528" text-anchor="middle">Embedding Svc</text>
    <rect x="320" y="500" width="120" height="40" rx="8" fill="#e2e3e5"/>
    <text x="380" y="528" text-anchor="middle">Redis Queue</text>
    <rect x="500" y="500" width="120" height="40" rx="8" fill="#d1ecf1"/>
    <text x="560" y="528" text-anchor="middle">Prometheus</text>
    <rect x="660" y="500" width="120" height="40" rx="8" fill="#d1ecf1"/>
    <text x="720" y="528" text-anchor="middle">Flower</text>
    <!-- Arrows -->
    <line x1="200" y1="60" x2="260" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="440" y1="60" x2="500" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="620" y1="60" x2="660" y2="60" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="80" x2="350" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="160" x2="350" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="220" x2="350" y2="240" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="280" x2="350" y2="300" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="340" x2="130" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="340" x2="320" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="340" x2="460" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="340" x2="600" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="350" y1="340" x2="740" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="130" y1="440" x2="100" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="320" y1="440" x2="240" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="460" y1="440" x2="380" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="560" y1="440" x2="560" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="740" y1="440" x2="720" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <defs>
      <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
        <path d="M0,0 L10,5 L0,10 z" fill="#333" />
      </marker>
    </defs>
  </g>
</svg> 